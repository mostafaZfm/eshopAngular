<div class="container">
  <h2 class="title">ูุญุตููุงุช ูุง</h2>

  <!-- async pipe ุจุฑุง ฺฉูุชุฑู ููุฏ ุดุฏู ุฏุงุฏู -->
  <ng-container *ngIf="products$ | async as products; else loading">

    <!-- ุฎุทุง ุฎุงู ุจูุฏู ุขุฑุงู -->
    <div *ngIf="products.length === 0" class="empty-state">
      <p>๐ ูฺ ูุญุตูู ุงูุช ูุดุฏ</p>
      <p>ูุทูุงู ุจุนุฏุงู ูุฑุงุฌุนู ฺฉูุฏ</p>
    </div>

    <!-- Grid ูุญุตููุงุช -->
    <div class="grid" *ngIf="products.length > 0">
      <div class="card" *ngFor="let p of products; trackBy: trackByProductId">

        <div class="image-container">
          <img
            [src]="p.imageUrl || 'assets/images/no-image.png'"
            [alt]="p.name"
            loading="lazy"
            (error)="onImageError($event)"
          />
        </div>

        <div class="card-content">
          <h3>{{ p.name }}</h3>
          <p class="description">{{ p.description }}</p>
          <div class="price">{{ p.price | number:'1.0-0' }} ุชููุงู</div>

          <div class="card-footer">
            <span class="status" [class.active]="p.isActive" [class.inactive]="!p.isActive">
              {{ p.isActive ? 'ููุฌูุฏ' : 'ูุงููุฌูุฏ' }}
            </span>
            <button class="btn btn-primary">ุงูุฒูุฏู ุจู ุณุจุฏ ุฎุฑุฏ</button>
          </div>
        </div>

      </div>
    </div>
  </ng-container>

  <!-- Loading template -->
  <ng-template #loading>
    <div class="loading">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ูุญุตููุงุช...</div>
  </ng-template>
</div>
